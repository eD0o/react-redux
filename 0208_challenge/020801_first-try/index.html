<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redux</title>
  <script src="./redux.min.js"></script>
  <script src="./immer.min.js"></script>
</head>

<body>

  <h1 id="classes"></h1>
  <h1 id="student"></h1>

  <script type="module">
    import store from './store/configureStore.js';
    import { incrementTime, decrementTime, changeEmail } from './store/student.js';
    import { completeClass, completeCourse, resetCourse } from './store/classes.js';

    function render() {
      const { classes, student } = store.getState();
      const studentEl = document.querySelector("#student")
      const classesEl = document.querySelector("#classes")

      studentEl.innerText = `${student.name} : ${student.email} : ${student.remainingDays}`
      classesEl.innerText = classes.filter((classes) => classes.complete === true).length
    }

    render()
    store.subscribe(render);

    store.dispatch(incrementTime())
    store.dispatch(incrementTime())
    store.dispatch(decrementTime())
    store.dispatch(changeEmail('edu@gmail.com'))
    store.dispatch(completeCourse())
    store.dispatch(resetCourse())
    store.dispatch(completeClass(2))

    console.log(store.getState());
  </script>
</body>

</html>